<!-- Responsive Order Details Section -->
<section class="my-5">
    <div class="container main-body">
        <div class="row g-4">
            <!-- Sidebar/Profile -->
            <div class="col-12 col-lg-4 mb-4 mb-lg-0">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                            <img src="https://bootdey.com/img/Content/avatar/avatar6.png" alt="Admin"
                                class="rounded-circle p-1 bg-warning" width="110">
                            <div class="mt-3">
                                <h4>{{userdetails.name}}</h4>
                                <p class="text-secondary mb-1">{{userdetails.email}}</p>
                                <p class="text-muted font-size-sm">{{userAddress.city + ' , '+ userAddress.state}}</p>
                            </div>
                        </div>
                        <div class="list-group list-group-flush text-center mt-4">
                            <a class="list-group-item list-group-item-action border-0">
                                Profile Information
                            </a>
                            <a (click)="screentoggle('Orders')" class="list-group-item list-group-item-action border-0"
                                [class.active]="isOrder || isSpecorder">Orders</a>
                            <a *ngIf="isAdd" class="list-group-item list-group-item-action border-0"
                                [class.active]="isAdd">Address Book</a>
                            <a href="#" class="list-group-item list-group-item-action border-0"
                                (click)="logout()">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Specific Order Details -->
            <div class="col-12 col-lg-8" *ngIf="isSpecorder">
                <div>
                    <div class="card mt-4 mt-lg-0">
                        <div class="card-body p-0 table-responsive">
                            <div
                                class="d-flex flex-column flex-md-row justify-content-between align-items-center border-bottom">
                                <h4 class="p-3 mb-0">Order OverView</h4>
                                <label for="download" class="p-3 mb-0" style="cursor: pointer"
                                    (click)="downloadInvoice()">Save Invoice</label>
                            </div>
                            <div class="table-responsive">
                                <table class="table mb-0">
                                    <thead>
                                        <tr>
                                            <th scope="col">Product</th>
                                            <th scope="col">Quantity</th>
                                            <th scope="col" colspan="2">Price</th>
                                            <th scope="col">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let order of specOrders; let i = index">
                                            <td>{{order.product.name}}</td>
                                            <td>{{order.quantity}}</td>
                                            <td colspan="2"><strong>₹ {{order.price}}</strong></td>
                                            <td><strong>₹ {{order.quantity * order.price}}</strong></td>
                                        </tr>
                                        <tr>
                                            <th colspan="2">
                                                LogisticsPartner : <span>{{logisticsPartner || 'We are processing your
                                                    order'}}</span><br>
                                                TrackingId : <span>{{trackingId || 'We are processing your
                                                    order'}}</span>
                                            </th>
                                            <th colspan="3" class="text-end">
                                                <span class="text-muted">Total Price</span> <br>
                                                <strong>₹ {{totalPrice}}</strong>
                                            </th>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center my-3">
                                <button class="btn btn-primary" (click)="screentoggle('Orders')">Back to Orders</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Orders List -->
            <div class="col-12 col-lg-8" *ngIf="isOrder">
                <ng-container *ngIf="orders.length === 0">
                    <div class="alert alert-warning text-center">
                        <strong>No Orders yet. Place order to receive items. To process <a
                                [routerLink]="['/user/productsList']">click here</a>.</strong>
                    </div>
                </ng-container>
                <ng-container *ngIf="orders.length >= 1">
                    <div>
                        <div class="card">
                            <div class="card-body">
                                <div class="top-status">
                                    <h5>ORDER #{{orders[0].orderId}}</h5>
                                    <ul>
                                        <li *ngFor="let statusMsg of getCurrentState(); let i = index"
                                            [ngClass]="{'active': true}">
                                            <!-- SVG icons and status text as in your code -->
                                            <span>{{statusMsg}}</span>
                                        </li>
                                        <li
                                            *ngIf="orders[0].status === 'CANCELLED' || orders[0].status === 'REFUNDED' || orders[0].status === 'RETURNED' || orders[0].status === 'FAILED'">
                                            <span>{{orders[0].status}}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="card mt-4">
                            <div class="card-body p-0 table-responsive">
                                <h4 class="p-3 mb-0">Your Orders</h4>
                                <div class="table-responsive">
                                    <table class="table mb-0">
                                        <thead>
                                            <tr>
                                                <th scope="col">Order ID</th>
                                                <th scope="col">Date</th>
                                                <th scope="col" colspan="2">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let order of orders; let i = index">
                                                <td>
                                                    <a style="cursor: pointer;"
                                                        (click)="showOrderStatus(i)">{{order.orderId}}</a>
                                                </td>
                                                <td>{{order.orderDate | date: 'd/MM'}}</td>
                                                <td colspan="2">
                                                    <strong>
                                                        <span class="badge bg-warning text-dark">{{order.status}}</span>
                                                    </strong>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
            <!-- Billing/Shipping Form -->
            <div class="col-12 col-lg-8" *ngIf="isAdd">
                <div class="form__name">Billing Form</div>
                <div class="form__container">
                    <section class="form__personal">
                        <div class="sections d-flex align-items-center mb-3">
                            <div class="box me-2">1</div><span>Personal Information</span>
                        </div>
                        <div class="personal--form">
                            <form class="form--name" action="">
                                <div class="row g-3">
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="firstname">First Name</label>
                                        <input placeholder="e.g. Richard" [value]="name.fName" id="firstname"
                                            type="text" class="form-control" disabled />
                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="lastname">Last Name</label>
                                        <input placeholder="e.g. Bovell" [value]="name.lName" id="lastname" type="text"
                                            class="form-control" disabled />
                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="email">Email</label>
                                        <input placeholder="e.g. rb@apple.com" id="email" [value]="userdetails.email"
                                            type="email" class="form-control" disabled />
                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="contact">Contact</label>
                                        <input placeholder="e.g. 9876543210" id="contact" type="text"
                                            [value]="userdetails.phoneNumber" class="form-control" disabled />
                                    </div>
                                </div>
                            </form>
                        </div>
                    </section>
                    <section class="form__billing mt-4">
                        <div class="sections d-flex align-items-center mb-3">
                            <div class="box billing me-2">2</div><span>Billing Address</span>
                        </div>
                        <div class="shipping--form">
                            <form class="form--shipping row g-3" [formGroup]="addressForm" action="">
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="address-one">Address Line 1</label>
                                    <input placeholder="e.g. 1 Infinite Loop" id="address-one" type="text" name="AddL1"
                                        formControlName="addressL1" class="form-control" />
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="address-two">Address Line 2</label>
                                    <input id="address-two" type="text" name="addL2" formControlName="addressL2"
                                        class="form-control" />
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="city">City</label>
                                    <input placeholder="e.g. Cupertino" id="city" type="text" name="City"
                                        formControlName="city" class="form-control" />
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="state">State / Province / Region</label>
                                    <input placeholder="e.g. California" id="state" type="text" name="state"
                                        formControlName="state" class="form-control" />
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="zip">Zip / Postal Code</label>
                                    <input placeholder="e.g. 95014" id="zip" type="text" name="zip"
                                        formControlName="zip" maxlength="6" (input)="restrictText($event)"
                                        class="form-control" />
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="country">Country</label>
                                    <input placeholder="e.g. U.S.A" id="country" type="text" name="country"
                                        formControlName="country" class="form-control" />
                                </div>
                            </form>
                        </div>
                    </section>
                    <div class="form__confirmation text-end text-md-end mt-3">
                        <button class="btn btn-warning w-100 w-md-auto" [disabled]="addressForm.invalid"
                            (click)="confirmOrder()">Place Order</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>